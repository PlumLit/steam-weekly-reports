<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Steamæ–°å“å‘¨æŠ¥å¯è§†åŒ–çœ‹æ¿ (2026-01 W3)</title>
    <link rel="icon" href="data:,">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/echarts@5.4.3/dist/echarts.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; background-color: #f3f4f6; }
        .card { background: white; border-radius: 12px; box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1); padding: 20px; transition: transform 0.2s; }
        .card:hover { transform: translateY(-2px); box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1); }
        .tag { display: inline-block; padding: 4px 12px; border-radius: 9999px; font-size: 0.875rem; font-weight: 600; margin-right: 8px; margin-bottom: 8px; }
        .tag-pixel { background-color: #e0e7ff; color: #4338ca; }
        .tag-stress { background-color: #dcfce7; color: #15803d; }
        .tag-contrast { background-color: #fae8ff; color: #86198f; }
        .tag-coop { background-color: #ffedd5; color: #c2410c; }
        
        /* Hover Card Styles */
        .hover-card {
            display: none;
            position: absolute;
            z-index: 9999; /* Higher z-index */
            width: 320px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.2);
            border: 1px solid #e5e7eb;
            pointer-events: none;
            overflow: hidden;
            transition: opacity 0.1s ease; /* Smooth appearance */
        }
        .hover-card img {
            width: 100%;
            height: auto;
            display: block;
        }
        .hover-card-content {
            padding: 12px;
        }
        tr:hover .game-title {
            color: #4f46e5;
            text-decoration: underline;
        }
    </style>
</head>
<body class="p-6">

    <!-- Version Nav -->
    <div id="version-nav" class="max-w-7xl mx-auto mb-6">
        <div class="flex flex-col md:flex-row gap-3 md:items-center md:justify-between bg-white/80 backdrop-blur border rounded-xl px-4 py-3 shadow-sm">
            <div class="flex items-center gap-2 text-sm text-gray-600">
                <span class="font-semibold text-gray-900">ç‰ˆæœ¬</span>
                <span id="current-version-label" class="px-2 py-0.5 rounded bg-gray-100 text-gray-700">åŠ è½½ä¸­â€¦</span>
            </div>
            <div class="flex flex-wrap items-center gap-2">
                <a id="latest-link" href="#" class="inline-flex items-center px-3 py-1.5 rounded-lg bg-indigo-600 text-white text-sm font-medium hover:bg-indigo-700">æœ€æ–°ç‰ˆæœ¬</a>
                <select id="version-select" class="px-3 py-1.5 rounded-lg border bg-white text-sm text-gray-700">
                    <option value="">åŠ è½½å†å²ç‰ˆæœ¬â€¦</option>
                </select>
                <button id="open-version" type="button" class="inline-flex items-center px-3 py-1.5 rounded-lg border text-sm font-medium text-gray-700 hover:bg-gray-50">æ‰“å¼€</button>
            </div>
        </div>
        <p id="version-nav-hint" class="mt-2 text-xs text-gray-500"></p>
    </div>

    <!-- Header -->
    <header class="mb-8 text-center">
        <h1 class="text-3xl font-bold text-gray-800 mb-2">Steam æ–°å“å‘¨æŠ¥å¯è§†åŒ–çœ‹æ¿</h1>
        <p class="text-gray-500">ğŸ“… å‘¨æœŸï¼š2026å¹´1æœˆç¬¬3å‘¨ | ğŸ“Š æ•°æ®æ¥æºï¼šSteam Analysis</p>
    </header>

    <!-- Section 1: Market Pulse -->
    <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
        <div class="card md:col-span-2">
            <h2 class="text-xl font-bold text-gray-800 mb-4">ğŸ”¥ èµ›é“çƒ­åŠ›ä¸å…³é”®è¯</h2>
            <div class="flex flex-wrap mb-4">
                <span class="tag tag-pixel">#æ¨¡æ‹Ÿç»è¥</span>
                <span class="tag tag-stress">#æç®€ç­–ç•¥</span>
                <span class="tag tag-contrast">#äº‘é™ªä¼´</span>
                <span class="tag tag-coop">#äºŒæ¬¡å…ƒ</span>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4 text-sm">
                <div class="bg-blue-50 p-3 rounded-lg border-l-4 border-blue-500">
                    <strong class="block text-blue-700 mb-1">ç”Ÿäº§åŠ›æ¸¸æˆåŒ–</strong>
                    <p class="text-gray-600">ã€ŠOn-Togetherã€‹ç»“åˆäº‘è‡ªä¹ ä¸å…»æˆï¼Œåˆ‡ä¸­å­¤ç‹¬åŠå…¬ç—›ç‚¹ã€‚</p>
                </div>
                <div class="bg-green-50 p-3 rounded-lg border-l-4 border-green-500">
                    <strong class="block text-green-700 mb-1">å¡ç‰Œåšå‡æ³•</strong>
                    <p class="text-gray-600">ã€ŠOne Turn Killã€‹å°†æˆ˜æ–—å‹ç¼©è‡³ä¸€å›åˆï¼Œè¿åˆç¢ç‰‡åŒ–çˆ½æ„Ÿã€‚</p>
                </div>
                <div class="bg-purple-50 p-3 rounded-lg border-l-4 border-purple-500">
                    <strong class="block text-purple-700 mb-1">é¢˜æç”Ÿæ´»åŒ–</strong>
                    <p class="text-gray-600">ä»å¥¶èŒ¶åº—åˆ°æ¡ƒæºæ‘ï¼Œæ¨¡æ‹Ÿç»è¥è¿½æ±‚æè‡´çš„æ²»æ„ˆæ„Ÿã€‚</p>
                </div>
            </div>
        </div>
        <div class="card flex flex-col justify-center items-center bg-gradient-to-br from-indigo-500 to-purple-600 text-white">
            <h3 class="text-lg font-semibold opacity-90">æœ¬å‘¨çƒ­é—¨èµ›é“</h3>
            <div class="text-3xl font-bold mt-2">æ¨¡æ‹Ÿç»è¥</div>
            <div class="text-xl opacity-75 mt-1">&</div>
            <div class="text-3xl font-bold mt-1">ä¼‘é—²</div>
        </div>
    </div>

    <!-- Section 2: Top 10 Charts -->
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8">
        <!-- Chart: Review Count Ranking -->
        <div class="card">
            <h2 class="text-xl font-bold text-gray-800 mb-4">ğŸ† çƒ­é—¨æ–°å“çƒ­åº¦æ’è¡Œ (è¯„è®ºæ•°)</h2>
            <div id="chart-reviews" style="height: 350px;"></div>
        </div>
        <!-- Chart: Rating vs Reviews -->
        <div class="card">
            <h2 class="text-xl font-bold text-gray-800 mb-4">ğŸ’ çƒ­åº¦ä¸å£ç¢‘åˆ†å¸ƒ (æ°”æ³¡å›¾)</h2>
            <div id="chart-scatter" style="height: 350px;"></div>
        </div>
    </div>

    <!-- Section 3: Deep Dive Radar -->
    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8">
        <!-- Deep Dive Card 1 -->
        <div class="card">
            <div class="flex justify-between items-start mb-4">
                <div>
                    <h2 class="text-xl font-bold text-gray-800">One Turn Kill</h2>
                    <p class="text-sm text-gray-500">æç®€å¡ç‰Œè§£è°œï¼Œç«–å±ç¥ä½œ</p>
                </div>
                <span class="bg-red-100 text-red-800 text-xs font-medium px-2.5 py-0.5 rounded">Sçº§æ¨è</span>
            </div>
            
            <div class="grid grid-cols-1 gap-4">
                <div id="radar-3151270" class="w-full" style="height: 200px;"></div>
                <div class="text-sm bg-indigo-50 p-3 rounded border-l-4 border-indigo-500">
                    <strong>æ ¸å¿ƒæ´å¯Ÿï¼š</strong> å‰¥ç¦»è¿è¥ï¼Œåªç•™â€œæ–©æ€â€ã€‚ä¸€å›åˆå®šèƒœè´Ÿçš„æœºåˆ¶æé€‚åˆç§»åŠ¨ç«¯ç¢ç‰‡åŒ–åœºæ™¯ã€‚
                </div>
                <div id="screenshots-3151270" class="grid grid-cols-2 gap-2" data-appid="3151270" data-limit="4"></div>
            </div>
        </div>

        <!-- Deep Dive Card 2 -->
        <div class="card">
            <div class="flex justify-between items-start mb-4">
                <div>
                    <h2 class="text-xl font-bold text-gray-800">å¥¶èŒ¶åº—å¤§äº¨</h2>
                    <p class="text-sm text-gray-500">å‚ç›´æ¨¡æ‹Ÿç»è¥ï¼Œå¼ºå¸é‡é¢˜æ</p>
                </div>
                <span class="bg-red-100 text-red-800 text-xs font-medium px-2.5 py-0.5 rounded">Sçº§æ¨è</span>
            </div>
            
            <div class="grid grid-cols-1 gap-4">
                <div id="radar-3334520" class="w-full" style="height: 200px;"></div>
                <div class="text-sm bg-pink-50 p-3 rounded border-l-4 border-pink-500">
                    <strong>æ ¸å¿ƒæ´å¯Ÿï¼š</strong> è¿˜åŸåˆ¶ä½œå…¨æµç¨‹ï¼Œæ¯”æ”¾ç½®ç±»æ›´æœ‰æ·±åº¦ã€‚é¢˜æåœ¨äºšæ´²å¸‚åœºæœ‰å¤©ç„¶å·¨å¤§æµé‡ã€‚
                </div>
                <div id="screenshots-3334520" class="grid grid-cols-2 gap-2" data-appid="3334520" data-limit="4"></div>
            </div>
        </div>

        <!-- Deep Dive Card 3 -->
        <div class="card">
            <div class="flex justify-between items-start mb-4">
                <div>
                    <h2 class="text-xl font-bold text-gray-800">æ¡ƒæºæ‘æ—¥å¿—</h2>
                    <p class="text-sm text-gray-500">æ²»æ„ˆç³»ç§ç”°ï¼Œå®Œç¾é€‚é…</p>
                </div>
                <span class="bg-green-100 text-green-800 text-xs font-medium px-2.5 py-0.5 rounded">Sçº§æ¨è</span>
            </div>
            
            <div class="grid grid-cols-1 gap-4">
                <div id="radar-2678830" class="w-full" style="height: 200px;"></div>
                <div class="text-sm bg-green-50 p-3 rounded border-l-4 border-green-500">
                    <strong>æ ¸å¿ƒæ´å¯Ÿï¼š</strong> å¯¹æ ‡æ˜Ÿéœ²è°·ä½†æ›´åå›½é£æ²»æ„ˆã€‚æ…¢èŠ‚å¥ä½“éªŒç²¾å‡†å‘½ä¸­â€œé€ƒç¦»åŸå¸‚â€çš„ç”¨æˆ·å¿ƒç†ã€‚
                </div>
                <div id="screenshots-2678830" class="grid grid-cols-2 gap-2" data-appid="2678830" data-limit="4"></div>
            </div>
        </div>
    </div>

    <!-- Section 4: Data Table -->
    <div class="card mb-8 overflow-hidden">
        <h2 class="text-xl font-bold text-gray-800 mb-4 px-2">ğŸ“‹ è¯¦ç»†æ¦œå•æ•°æ® (HoveræŸ¥çœ‹è¯¦æƒ…)</h2>
        <div class="overflow-x-auto">
            <table class="min-w-full text-sm text-left text-gray-500">
                <thead class="text-xs text-gray-700 uppercase bg-gray-50">
                    <tr>
                        <th class="px-6 py-3">å°é¢</th>
                        <th class="px-6 py-3">æ’å</th>
                        <th class="px-6 py-3">æ¸¸æˆåç§°</th>
                        <th class="px-6 py-3">ç±»å‹</th>
                        <th class="px-6 py-3">è¯„è®ºæ•°</th>
                        <th class="px-6 py-3">å¥½è¯„ç‡</th>
                        <th class="px-6 py-3">æ‰‹æ¸¸åŒ–æ½œåŠ›</th>
                    </tr>
                </thead>
                <tbody class="bg-white border-b" id="game-table-body">
                    <!-- Data Rows will be inserted by JS -->
                </tbody>
            </table>
        </div>
    </div>

    <!-- Hover Card Element -->
    <div id="hover-card" class="hover-card">
        <img id="hover-img" src="" alt="Game Preview">
        <div class="hover-card-content">
            <h4 id="hover-title" class="font-bold text-gray-800 text-lg"></h4>
            <p id="hover-desc" class="text-sm text-gray-600 mt-1"></p>
        </div>
    </div>

    <!-- Detail Modal -->
    <div id="detail-modal" class="fixed inset-0 hidden items-center justify-center" style="z-index: 10000;">
        <div id="detail-backdrop" class="absolute inset-0 bg-black/50"></div>
        <div class="relative bg-white rounded-xl shadow-2xl w-[min(960px,92vw)] max-h-[88vh] overflow-hidden">
            <div class="flex items-start justify-between p-4 border-b">
                <div class="pr-4">
                    <h3 id="detail-title" class="text-lg font-bold text-gray-900"></h3>
                    <p id="detail-sub" class="text-sm text-gray-500 mt-1"></p>
                </div>
                <button id="detail-close" class="text-gray-500 hover:text-gray-900 px-2 py-1">å…³é—­</button>
            </div>
            <div class="p-4 overflow-auto" style="max-height: calc(88vh - 64px);">
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                    <div class="md:col-span-1">
                        <img id="detail-header" class="w-full rounded-lg shadow-sm" alt="">
                        <a id="detail-store-link" target="_blank" class="mt-3 inline-block text-sm text-indigo-600 hover:underline">æ‰“å¼€ Steam å•†åº—é¡µ</a>
                    </div>
                    <div class="md:col-span-2">
                        <p id="detail-desc" class="text-sm text-gray-700 leading-relaxed"></p>
                        <div class="mt-4">
                            <h4 class="font-semibold text-gray-800 mb-2 text-sm">ğŸ“· å®˜æ–¹æˆªå›¾/ç®€ä»‹ï¼ˆSteam å°ç»„ä»¶ï¼‰</h4>
                            <div class="rounded-lg overflow-hidden border bg-gray-50">
                                <iframe id="detail-widget" title="Steam Widget" class="w-full" style="height: 220px;" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
                            </div>
                            <p class="text-xs text-gray-500 mt-2">å¦‚æœç½‘ç»œç¯å¢ƒå±è”½ Steamï¼Œå°ç»„ä»¶å¯èƒ½æ— æ³•åŠ è½½ã€‚</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="text-center text-gray-400 text-sm pb-8">
        <p>Generated by AI Assistant | Based on Steam Weekly Report</p>
    </footer>

    <script>
        // ==============================
        // Version switcher (Latest <-> Archive)
        // ==============================
        const VERSION_NAV_CONFIG = {
            owner: 'PlumLit',
            repo: 'steam-weekly-reports',
            branch: 'main',
            archiveDir: 'archive'
        };

        function getSiteBasePathname() {
            // GitHub Pages: /steam-weekly-reports/...  => base = /steam-weekly-reports/
            // Local server: /index.html               => base = /
            const segs = window.location.pathname.replace(/^\/+/, '').split('/').filter(Boolean);
            if (segs.length === 0) return '/';
            const first = segs[0];
            if (first.endsWith('.html') || first === VERSION_NAV_CONFIG.archiveDir) return '/';
            return `/${first}/`;
        }

        function getLatestUrl() {
            const base = getSiteBasePathname();
            return `${window.location.origin}${base}`;
        }

        function normalizeUrl(u) {
            try {
                const x = new URL(u, window.location.href);
                x.hash = '';
                return x.toString();
            } catch {
                return u;
            }
        }

        function filenameToLabel(name) {
            // 2026_01_W4_Steam_Dashboard.html -> 2026-01 W4
            const m = String(name).match(/(\d{4})_(\d{2})_W(\d+)/);
            if (m) return `${m[1]}-${m[2]} W${m[3]}`;
            const t = String(name).replace(/\.html$/i, '').replace(/_/g, ' ');
            return t;
        }

        async function fetchArchiveIndex() {
            const cacheKey = 'steam_weekly_reports_archive_cache_v1';
            const cacheTsKey = 'steam_weekly_reports_archive_cache_ts_v1';
            const now = Date.now();
            const cacheTtlMs = 10 * 60 * 1000;

            const cached = window.localStorage.getItem(cacheKey);
            const cachedTs = Number(window.localStorage.getItem(cacheTsKey) || '0');
            if (cached && (now - cachedTs) < cacheTtlMs) {
                return JSON.parse(cached);
            }

            const api = `https://api.github.com/repos/${VERSION_NAV_CONFIG.owner}/${VERSION_NAV_CONFIG.repo}/contents/${VERSION_NAV_CONFIG.archiveDir}?ref=${VERSION_NAV_CONFIG.branch}`;
            const res = await fetch(api, { headers: { 'Accept': 'application/vnd.github+json' } });
            if (!res.ok) throw new Error(`GitHub API error: ${res.status}`);
            const data = await res.json();
            const items = (Array.isArray(data) ? data : [])
                .filter(x => x && x.type === 'file' && typeof x.name === 'string' && x.name.toLowerCase().endsWith('.html'))
                .map(x => ({ name: x.name }));

            window.localStorage.setItem(cacheKey, JSON.stringify(items));
            window.localStorage.setItem(cacheTsKey, String(now));
            return items;
        }

        async function initVersionNav() {
            const select = document.getElementById('version-select');
            const openBtn = document.getElementById('open-version');
            const latestLink = document.getElementById('latest-link');
            const labelEl = document.getElementById('current-version-label');
            const hintEl = document.getElementById('version-nav-hint');
            if (!select || !openBtn || !latestLink || !labelEl) return;

            const titleMatch = String(document.title).match(/\(([^)]+)\)/);
            const titleLabel = titleMatch ? titleMatch[1] : '';

            const latestUrl = getLatestUrl();
            latestLink.href = latestUrl;

            const current = normalizeUrl(window.location.href);
            const base = normalizeUrl(latestUrl);
            const isLatest = current === base || current === normalizeUrl(`${latestUrl}index.html`);

            labelEl.textContent = titleLabel ? `${titleLabel}${isLatest ? 'ï¼ˆæœ€æ–°ï¼‰' : 'ï¼ˆå†å²ï¼‰'}` : (isLatest ? 'æœ€æ–°ç‰ˆæœ¬' : 'å†å²ç‰ˆæœ¬');
            if (hintEl) {
                hintEl.textContent = isLatest
                    ? 'ä½ æ­£åœ¨æŸ¥çœ‹æœ€æ–°ç‰ˆæœ¬ï¼ˆindex.htmlï¼Œé»˜è®¤åº”ä¸ºæœ€è¿‘ä¸€å‘¨ï¼‰ã€‚å¯åœ¨å³ä¾§é€‰æ‹©ä»»æ„å†å²ç‰ˆæœ¬ã€‚'
                    : 'ä½ æ­£åœ¨æŸ¥çœ‹å†å²ç‰ˆæœ¬ï¼Œå¯éšæ—¶è¿”å›æœ€æ–°ç‰ˆæœ¬ï¼ˆindex.htmlï¼‰ã€‚';
            }

            select.innerHTML = '';
            select.appendChild(new Option('é€‰æ‹©å†å²ç‰ˆæœ¬â€¦', ''));
            select.appendChild(new Option('æœ€æ–°ç‰ˆæœ¬ï¼ˆindexï¼‰', latestUrl));

            let archives = [];
            try {
                archives = await fetchArchiveIndex();
            } catch (e) {
                // If API fails, keep dropdown usable for "latest"
                if (hintEl) hintEl.textContent = 'ï¼ˆæç¤ºï¼‰å†å²ç‰ˆæœ¬åˆ—è¡¨åŠ è½½å¤±è´¥ï¼Œä½†â€œæœ€æ–°ç‰ˆæœ¬â€ä»å¯ç”¨ã€‚';
            }

            const basePath = getSiteBasePathname();
            const archiveBase = `${window.location.origin}${basePath}${VERSION_NAV_CONFIG.archiveDir}/`;

            archives
                .sort((a, b) => String(b.name).localeCompare(String(a.name)))
                .forEach((it) => {
                    const url = `${archiveBase}${it.name}`;
                    const text = filenameToLabel(it.name);
                    select.appendChild(new Option(text, url));
                });

            // Preselect current page if possible
            for (const opt of Array.from(select.options)) {
                if (opt.value && normalizeUrl(opt.value) === current) {
                    select.value = opt.value;
                    break;
                }
            }

            const go = () => {
                const v = select.value;
                if (v) window.location.href = v;
            };
            openBtn.addEventListener('click', go);
            select.addEventListener('change', () => { if (select.value) go(); });
        }

        // Script is at bottom, DOM is ready; still guard for safety.
        if (document.readyState === 'loading') document.addEventListener('DOMContentLoaded', initVersionNav);
        else initVersionNav();

        function steamStoreUrl(appId) { return `https://store.steampowered.com/app/${appId}/`; }
        function steamWidgetUrl(appId) { return `https://store.steampowered.com/widget/${appId}/?l=schinese`; }
        
        function steamImageCandidates(appId) {
            const baseA = `https://shared.akamai.steamstatic.com/store_item_assets/steam/apps/${appId}`;
            const baseB = `https://cdn.cloudflare.steamstatic.com/steam/apps/${appId}`;
            return [
                `${baseA}/capsule_231x87.jpg`, `${baseA}/header.jpg`, `${baseB}/header.jpg`
            ];
        }

        function steamGalleryCandidates(appId) {
            const baseA = `https://shared.akamai.steamstatic.com/store_item_assets/steam/apps/${appId}`;
            return [
                `${baseA}/header.jpg`, `${baseA}/library_600x900.jpg`, `${baseA}/library_hero.jpg`, `${baseA}/library_capsule.jpg`
            ];
        }

        function setImgWithFallback(imgEl, urls, { alt } = {}) {
            if (!imgEl || !Array.isArray(urls) || urls.length === 0) return;
            if (alt) imgEl.alt = alt;
            let i = 0;
            const tryNext = () => {
                if (i >= urls.length) { imgEl.onerror = null; return; }
                imgEl.src = urls[i++];
            };
            imgEl.onerror = () => tryNext();
            tryNext();
        }

        // Data
        const games = [
            { name: 'MIO: Memories in Orbit', appId: '1672810', reviews: 145, rating: 82, genre: 'åŠ¨ä½œ/å†’é™©', potential: 'A', potentialDesc: 'æ“ä½œéœ€ç®€åŒ–', potentialColor: 'orange', description: 'åºŸå¼ƒé£èˆ¹ä¸­çš„ç²¾ç¾é“¶æ²³æ¶é­”åŸå†’é™©' },
            { name: 'Solargene', appId: '1638300', reviews: 620, rating: 80, genre: 'ç‹¬ç«‹/æ¨¡æ‹Ÿ', potential: 'B+', potentialDesc: 'ç•Œé¢å¤ªå¤æ‚', potentialColor: 'blue', description: 'ç¡¬æ ¸ç§‘å¹»å¤ªç©ºä¼ä¸šç®¡ç†æ¨¡æ‹Ÿ' },
            { name: 'æ¡ƒæºæ‘æ—¥å¿—', appId: '2678830', reviews: 80, rating: 91, genre: 'ä¼‘é—²/æ¨¡æ‹Ÿ', potential: 'S', potentialDesc: 'å®Œç¾é€‚é…', potentialColor: 'red', description: 'æ²»æ„ˆç³»å¤é£ç§ç”°ä¸æ‘åº„å»ºè®¾' },
            { name: 'Gah! å“€å¹åœ°ç‰¢', appId: '2471090', reviews: 41, rating: 90, genre: 'åŠ¨ä½œ/RPG', potential: 'A', potentialDesc: 'é€‚åˆåŒæ‘‡æ†', potentialColor: 'orange', description: 'å¤šè§’è‰²åœ°ç‰¢è‚‰é¸½é—¯å…³' },
            { name: 'On-Together | éšæ—¶åœ¨ä¸€èµ·', appId: '3707400', reviews: 171, rating: 98, genre: 'ä¼‘é—²/å·¥å…·', potential: 'S', potentialDesc: 'å¼ºç¤¾äº¤æ½œåŠ›', potentialColor: 'red', description: 'æ¡Œé¢å® ç‰©+äº‘è‡ªä¹ é™ªä¼´å·¥å…·' },
            { name: 'ä¸/å­˜åœ¨çš„é€æ¢¦è€…ï¼šé“¶è‘±ä¹‹æ£®', appId: '3942480', reviews: 633, rating: 81, genre: 'å†’é™©/RPG', potential: 'A-', potentialDesc: 'éœ€é‡äº¤äº’', potentialColor: 'orange', description: 'å‰§æƒ…å‘å†’é™©RPGï¼Œç‹¬ç‰¹çš„å™äº‹ä½“éªŒ' },
            { name: 'å¥¶èŒ¶åº—å¤§äº¨', appId: '3334520', reviews: 49, rating: 93, genre: 'æ¨¡æ‹Ÿ/ç­–ç•¥', potential: 'S', potentialDesc: 'é¢˜æå¸é‡', potentialColor: 'red', description: 'å…¨æµç¨‹ç¡¬æ ¸å¥¶èŒ¶åˆ¶ä½œä¸åº—é“ºç»è¥' },
            { name: 'One Turn Kill', appId: '3151270', reviews: 423, rating: 95, genre: 'ç­–ç•¥/å¡ç‰Œ', potential: 'S', potentialDesc: 'ç«–å±ç¥ä½œ', potentialColor: 'red', description: 'å¿…é¡»åœ¨ä¸€å›åˆå†…è·èƒœçš„å¡ç‰Œè§£è°œ' },
            { name: 'æ¯é£è°·æˆ˜ç•¥', appId: '2646320', reviews: 781, rating: 79, genre: 'ç­–ç•¥/RPG', potential: 'A-', potentialDesc: 'é€‚åˆå¹³æ¿', potentialColor: 'orange', description: 'æ­¦ä¾ é¢˜æçš„åœ°åŸŸå‹åˆ¶å‹æˆ˜ç•¥æ¸¸æˆ' },
            { name: 'å°‘å¥³ä¸å­¦é™¢åŸ', appId: '3639650', reviews: 1102, rating: 74, genre: 'åŠ¨ä½œ/å†’é™©', potential: 'A', potentialDesc: 'åŠ¨ä½œè¦æ±‚é«˜', potentialColor: 'orange', description: '3Dæ¨ªç‰ˆäºŒæ¬¡å…ƒé“¶æ²³æ¶é­”åŸ' }
        ];

        // Render Table
        const tableBody = document.getElementById('game-table-body');
        games.forEach((game, index) => {
            const row = document.createElement('tr');
            row.className = 'hover:bg-gray-50 transition-colors duration-150 cursor-pointer';
            row.dataset.appid = game.appId;
            row.dataset.title = game.name;
            row.dataset.desc = game.description;
            
            let colorClass = 'bg-gray-100 text-gray-800';
            if (game.potentialColor === 'red') colorClass = 'bg-red-100 text-red-800';
            if (game.potentialColor === 'orange') colorClass = 'bg-orange-100 text-orange-800';
            if (game.potentialColor === 'blue') colorClass = 'bg-blue-100 text-blue-800';

            let ratingColor = 'text-gray-600';
            if (game.rating >= 90) ratingColor = 'text-green-600 font-bold';
            else if (game.rating >= 80) ratingColor = 'text-blue-600';
            else if (game.rating < 60) ratingColor = 'text-red-600';

            row.innerHTML = `
                <td class="px-6 py-3"><img class="table-cover rounded shadow-sm w-24 object-cover" alt="${game.name}"></td>
                <td class="px-6 py-4 font-medium text-gray-900 text-lg">${index + 1}</td>
                <td class="px-6 py-4"><a href="${steamStoreUrl(game.appId)}" target="_blank" class="game-title font-semibold text-gray-800 text-base block hover:underline">${game.name}</a></td>
                <td class="px-6 py-4 text-gray-600">${game.genre}</td>
                <td class="px-6 py-4">${game.reviews}</td>
                <td class="px-6 py-4 ${ratingColor}">${game.rating}%</td>
                <td class="px-6 py-4"><div class="flex items-center"><span class="${colorClass} text-xs font-medium px-2.5 py-0.5 rounded w-8 text-center shrink-0 mr-2 border border-opacity-20 border-black">${game.potential}</span><span class="text-xs text-gray-500">${game.potentialDesc}</span></div></td>
            `;
            tableBody.appendChild(row);
            setImgWithFallback(row.querySelector('img.table-cover'), steamImageCandidates(game.appId), { alt: game.name });
        });

        // Hover & Modal Logic (Simplified)
        const hoverCard = document.getElementById('hover-card');
        const detailModal = document.getElementById('detail-modal');
        
        tableBody.addEventListener('mousemove', (e) => {
            const row = e.target.closest('tr');
            if (row) {
                hoverCard.style.display = 'block';
                let top = e.pageY + 20, left = e.pageX + 20;
                if (left + 340 > window.innerWidth + window.scrollX) left = e.pageX - 340;
                if (top + 250 > window.innerHeight + window.scrollY) top = e.pageY - 250;
                hoverCard.style.top = `${top}px`; hoverCard.style.left = `${left}px`;
                
                const title = row.dataset.title;
                if (document.getElementById('hover-title').textContent !== title) {
                    document.getElementById('hover-title').textContent = title;
                    document.getElementById('hover-desc').textContent = row.dataset.desc;
                    setImgWithFallback(document.getElementById('hover-img'), steamImageCandidates(row.dataset.appid), { alt: title });
                }
            } else hoverCard.style.display = 'none';
        });
        tableBody.addEventListener('mouseleave', () => hoverCard.style.display = 'none');

        tableBody.addEventListener('click', (e) => {
            if (e.target.closest('a')) return;
            const row = e.target.closest('tr');
            if (!row) return;
            const appId = row.dataset.appid;
            const game = games.find(g => String(g.appId) === String(appId));
            
            document.getElementById('detail-title').textContent = game.name;
            document.getElementById('detail-sub').textContent = `${game.genre} | ${game.reviews} è¯„è®º | ${game.rating}% å¥½è¯„ | æ‰‹æ¸¸åŒ–ï¼š${game.potential}`;
            document.getElementById('detail-desc').textContent = game.description;
            document.getElementById('detail-store-link').href = steamStoreUrl(game.appId);
            document.getElementById('detail-widget').src = steamWidgetUrl(game.appId);
            setImgWithFallback(document.getElementById('detail-header'), steamImageCandidates(game.appId), { alt: game.name });
            detailModal.classList.remove('hidden'); detailModal.classList.add('flex');
        });

        document.getElementById('detail-close').addEventListener('click', () => { detailModal.classList.add('hidden'); detailModal.classList.remove('flex'); });
        document.getElementById('detail-backdrop').addEventListener('click', () => { detailModal.classList.add('hidden'); detailModal.classList.remove('flex'); });

        // Screenshots Logic
        (() => {
            const storeScreenshotMap = {
                "3151270": [
                    "https://shared.akamai.steamstatic.com/store_item_assets/steam/apps/3151270/2e3e42e0fbd3e21fb52c289327e5ebd88db08599/ss_2e3e42e0fbd3e21fb52c289327e5ebd88db08599.1920x1080.jpg?t=1768491573",
                    "https://shared.akamai.steamstatic.com/store_item_assets/steam/apps/3151270/c9cfbd279c02619b6f6c7910722a7c4d9b216306/ss_c9cfbd279c02619b6f6c7910722a7c4d9b216306.1920x1080.jpg?t=1768491573",
                    "https://shared.akamai.steamstatic.com/store_item_assets/steam/apps/3151270/bad9b9bacb38daffcb2d01678782b63fce96ff19/ss_bad9b9bacb38daffcb2d01678782b63fce96ff19.1920x1080.jpg?t=1768491573",
                    "https://shared.akamai.steamstatic.com/store_item_assets/steam/apps/3151270/f444932e8802fde8d7fe643cd489553cc5f8dd7c/ss_f444932e8802fde8d7fe643cd489553cc5f8dd7c.1920x1080.jpg?t=1768491573"
                ],
                "3334520": [
                    "https://shared.akamai.steamstatic.com/store_item_assets/steam/apps/3334520/c08b6018ea024ab1ca18e37dfc5c62406587dd2d/ss_c08b6018ea024ab1ca18e37dfc5c62406587dd2d.1920x1080.jpg?t=1768631504",
                    "https://shared.akamai.steamstatic.com/store_item_assets/steam/apps/3334520/e7c9f6e0802539707496d47be7c4a6bdb62e47b0/ss_e7c9f6e0802539707496d47be7c4a6bdb62e47b0.1920x1080.jpg?t=1768631504",
                    "https://shared.akamai.steamstatic.com/store_item_assets/steam/apps/3334520/5c45b160a53d85df81f092b07b064501453f45f9/ss_5c45b160a53d85df81f092b07b064501453f45f9.1920x1080.jpg?t=1768631504",
                    "https://shared.akamai.steamstatic.com/store_item_assets/steam/apps/3334520/2f3d84f6064066d9b5a639caffa2dc25ddfc55f1/ss_2f3d84f6064066d9b5a639caffa2dc25ddfc55f1.1920x1080.jpg?t=1768631504"
                ],
                "2678830": [
                    "https://shared.akamai.steamstatic.com/store_item_assets/steam/apps/2678830/332cb3e10d7a0696c1e1329be27313a0f5a3e45e/ss_332cb3e10d7a0696c1e1329be27313a0f5a3e45e.1920x1080.jpg?t=1769344579",
                    "https://shared.akamai.steamstatic.com/store_item_assets/steam/apps/2678830/79d6ac19c93d17a60a9d3686590f7ada7b2878cb/ss_79d6ac19c93d17a60a9d3686590f7ada7b2878cb.1920x1080.jpg?t=1769344579",
                    "https://shared.akamai.steamstatic.com/store_item_assets/steam/apps/2678830/70bef1daab8310ec2f0aa6f8a9d15920200c6671/ss_70bef1daab8310ec2f0aa6f8a9d15920200c6671.1920x1080.jpg?t=1769344579",
                    "https://shared.akamai.steamstatic.com/store_item_assets/steam/apps/2678830/29999fb74bee6b9690acf7cbb26b56b4f3695751/ss_29999fb74bee6b9690acf7cbb26b56b4f3695751.1920x1080.jpg?t=1769344579"
                ]
            };
            const containers = document.querySelectorAll('[data-appid][id^="screenshots-"]');
            containers.forEach((el) => {
                const appId = el.getAttribute('data-appid');
                const limit = Number.parseInt(el.getAttribute('data-limit') || '4', 10) || 4;
                const preferred = storeScreenshotMap[String(appId)];
                const urls = (preferred && preferred.length ? preferred : steamGalleryCandidates(appId)).slice(0, limit);
                el.innerHTML = '';
                urls.forEach((u, idx) => {
                    const img = document.createElement('img');
                    img.loading = 'lazy';
                    img.className = 'rounded shadow-sm hover:scale-105 transition-transform duration-200 cursor-pointer object-cover';
                    setImgWithFallback(img, [u, ...steamImageCandidates(appId)]);
                    el.appendChild(img);
                });
            });
        })();

        // Charts
        const chartReviews = echarts.init(document.getElementById('chart-reviews'));
        chartReviews.setOption({
            tooltip: { trigger: 'axis', axisPointer: { type: 'shadow' } },
            grid: { left: '3%', right: '4%', bottom: '3%', containLabel: true },
            xAxis: { type: 'value' },
            yAxis: { type: 'category', data: games.map(g => g.name).reverse() },
            series: [{ type: 'bar', data: games.map(g => g.reviews).reverse(), itemStyle: { color: '#6366f1' }, label: { show: true, position: 'right' } }]
        });

        const chartScatter = echarts.init(document.getElementById('chart-scatter'));
        chartScatter.setOption({
            tooltip: { formatter: (p) => `<b>${p.data[2]}</b><br/>è¯„è®º: ${p.data[0]}<br/>å¥½è¯„: ${p.data[1]}%` },
            xAxis: { type: 'value', name: 'è¯„è®ºæ•°' },
            yAxis: { type: 'value', name: 'å¥½è¯„ç‡ (%)', min: 50, max: 100 },
            series: [{
                symbolSize: (d) => Math.sqrt(d[0]) * 1.5,
                data: games.map(g => [g.reviews, g.rating, g.name]),
                type: 'scatter',
                itemStyle: { color: (p) => p.data[1] >= 90 ? '#22c55e' : p.data[1] >= 80 ? '#3b82f6' : '#ef4444' }
            }]
        });

        // Radar Charts
        const createRadar = (id, name, data, color) => {
            const chart = echarts.init(document.getElementById(id));
            chart.setOption({
                radar: { indicator: [{ name: 'å•†ä¸šåŒ–', max: 5 }, { name: 'ç§»åŠ¨ç«¯', max: 5 }, { name: 'é¢˜æ', max: 5 }, { name: 'ç¤¾äº¤', max: 5 }] },
                series: [{ type: 'radar', data: [{ value: data, name: name, areaStyle: { color: color + '33' }, lineStyle: { color: color } }] }]
            });
            return chart;
        };

        const r1 = createRadar('radar-3151270', 'One Turn Kill', [5, 5, 4.5, 4], '#ef4444');
        const r2 = createRadar('radar-3334520', 'å¥¶èŒ¶åº—å¤§äº¨', [5, 5, 5, 4], '#ec4899');
        const r3 = createRadar('radar-2678830', 'æ¡ƒæºæ‘æ—¥å¿—', [4, 5, 5, 5], '#22c55e');

        window.addEventListener('resize', () => {
            chartReviews.resize(); chartScatter.resize(); r1.resize(); r2.resize(); r3.resize();
        });
    </script>
</body>
</html>